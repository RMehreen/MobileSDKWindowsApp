<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Known Issues</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td><div id="projectlogo"><img width="100" height="39" alt="" src="http://www.citrix.com/content/dam/citrix/en_us/images/logos/Citrix_RGB.gif" /></div></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Mobile SDK for Windows Apps<span id="projectnumber">2.0</span></div>
   <div id="projectbrief">Transforming Windows apps into Mobile apps</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('cmpknownissues.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Known Issues </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There are existing issues with Citrix Mobility Pack on XenDesktop which will be addressed in a future release.</p>
<ul>
<li><a class="el" href="cmpknownissues.html#ReconnectIssue">Reconnect Issue</a> </li>
<li><a class="el" href="cmpknownissues.html#DeviceInformationIssue">Device Information</a> </li>
<li><a class="el" href="cmpknownissues.html#RedirectButtonIssue">Redirect Button</a> </li>
<li><a class="el" href="_android_receiver_issues.html">Android Receiver Issues</a></li>
</ul>
<h2><a class="anchor" id="ReconnectIssue"></a>
Reconnect Issue</h2>
<p>With any Citrix-related feature, it is expected that a reconnect to an existing session will not disrupt that feature. Citrix Mobility Pack is no exception. Communication between the mobile device and the session applications is restored. This all works fine in XenApp but there is an issue whereby the reconnect on XenDesktop will not automatically restore the Citrix Mobility Pack feature.</p>
<p>The reason this happened was because XenApp and XenDesktop act very differently related to reconnect events. The Citrix Mobility Pack code is not getting the same level of notification on XenDesktop as it would on XenApp.</p>
<p>Other features in XenDesktop have corrected this by more closely watching for connect/disconnect events. Citrix Mobility Pack needs this strategy as well but not yet.</p>
<p>There is a workaround for this issue but it is up to the developer of the applications to add this workaround into the application code. The main idea is to reset the virtual channel session.</p>
<p>The order of actions is:</p>
<ul>
<li>Check to see if virtual channel is open </li>
<li>If not open, proceed to close the existing session </li>
<li>Open a new session</li>
</ul>
<p>It is best to do this check before calling the next CMP API. Another possible strategy is to using a polling loop that checks occasionally. Checking before each API call is guaranteed but creates some overhead for calling CMP API.</p>
<p>This overhead can be reduced by creating a common function to do the work.</p>
<div class="fragment"><pre class="fragment">        <a class="code" href="class_citrix_mobile.html">CitrixMobile</a> cmp;
</pre></div> <div class="fragment"><pre class="fragment">        <span class="comment">// &lt;summary&gt;</span>
        <span class="comment">// Restart the virtual channel session if it is currently closed</span>
        <span class="comment">// &lt;/summary&gt;</span>
        <span class="keyword">public</span> Int32 ConfirmConnection()
        {
            Int32 rc = (Int32)<a class="code" href="cmpenum_8h.html#a871af3d562185126d8ea0c739e8bc8b1" title="CMPRESULT error definitions.">CMP_ERROR_ID</a>.CMP_NO_ERROR;

            if (!cmp.<a class="code" href="class_citrix_mobile.html#a1236f2d1ca72bbfdd13266394228db3e" title="Is virtual channel open.">IsChannelOpen</a>())
            {
                <span class="comment">// this is probably a disconnect so we need to reset our link</span>
                CloseSession();
                rc = OpenSession();
            }

            <span class="keywordflow">return</span> (rc);
        }
</pre></div><p> The entire sample that uses this tactic is under winform\displaysettings.</p>
<p>In the displaysettings example, the CMP API is wrapped and the wrapper functions call ConfirmConnection.</p>
<div class="fragment"><pre class="fragment">        <span class="comment">// &lt;summary&gt;</span>
        <span class="comment">// Wrapper function for GetOrientation</span>
        <span class="comment">// &lt;/summary&gt;</span>
        <span class="keyword">public</span> Int32 GetOrientation(ref <a class="code" href="struct_c_m_p___o_r_i_e_n_t_a_t_i_o_n___d_a_t_a.html" title="Collection of orientation-related data.">CMP_ORIENTATION_DATA</a> orientData)
        {
            Int32 rc = (Int32)<a class="code" href="cmpenum_8h.html#a871af3d562185126d8ea0c739e8bc8b1" title="CMPRESULT error definitions.">CMP_ERROR_ID</a>.CMP_NO_ERROR;

            if (cmp != null)
            {
                rc = ConfirmConnection();

                <span class="keywordflow">if</span> (CMPApp.CMP_SUCCESS(rc))
                {
                    rc = cmp.<a class="code" href="class_citrix_mobile.html#aa8ea35ace4d2c933d594ee16896f60bb" title="Get current orientation data.">GetOrientation</a>(out orientData);
                }
            }
            <span class="keywordflow">else</span>
            {
                rc = (Int32)<a class="code" href="cmpenum_8h.html#a871af3d562185126d8ea0c739e8bc8b1" title="CMPRESULT error definitions.">CMP_ERROR_ID</a>.CMP_ERROR_NOT_CONNECTED;
            }

            <span class="keywordflow">return</span> (rc);
        }
</pre></div><p> This approach was tested with XenDesktop 5.6 FP1 and it works fine.</p>
<h2><a class="anchor" id="DeviceInformationIssue"></a>
Device Information</h2>
<p>Based on a similar problem to <a class="el" href="cmpknownissues.html#ReconnectIssue">Reconnect Issue</a>, it is possible to perform a disconnect/reconnect and have the device information still be based on the original device. This only happens on XenDesktop. Essentially the CMP code thinks that it is still connected to the original device.</p>
<p>In order to correct this, do the same thing as <a class="el" href="cmpknownissues.html#ReconnectIssue">Reconnect Issue</a>. Once the virtual channel session has been reset, the right device information will be available.</p>
<h2><a class="anchor" id="RedirectButtonIssue"></a>
Redirect Button</h2>
<p>If an application redirects button notification to the server application, it is important to restore the original setting of the button redirection before the application exits. Otherwise the button redirection will continue to be in effect and button presses will be lost. Receiver will not process the button presses locally which could cause problems for the user. The "back" button is commonly used to go back to the previous layer. If the "back" button is pressed by the user when the application has not restored the state of the redirect, the Receiver will not go back to the connection screen.</p>
<p>It is important to clean up the button redirects in the application. All that is needed is to redirect back to the client device. </p>
</div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">Citrix Mobile SDK for Windows Apps Home</a>      </li>
    <li class="footer">Generated on Mon Nov 28 2016 13:14:03 for Mobile SDK for Windows Apps by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>
</body>
</html>
