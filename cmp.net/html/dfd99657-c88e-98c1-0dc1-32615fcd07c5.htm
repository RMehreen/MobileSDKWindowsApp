<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><style type="text/css">.OH_CodeSnippetContainerTabLeftActive, .OH_CodeSnippetContainerTabLeft,.OH_CodeSnippetContainerTabLeftDisabled { }.OH_CodeSnippetContainerTabRightActive, .OH_CodeSnippetContainerTabRight,.OH_CodeSnippetContainerTabRightDisabled { }.OH_footer { }</style><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>WeakRefEventHelper Class</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="WeakRefEventHelper class" /><meta name="System.Keywords" content="Citrix.Cmp.WeakRefEventHelper class" /><meta name="System.Keywords" content="WeakRefEventHelper class, about WeakRefEventHelper class" /><meta name="Microsoft.Help.F1" content="Citrix.Cmp.WeakRefEventHelper" /><meta name="Microsoft.Help.Id" content="T:Citrix.Cmp.WeakRefEventHelper" /><meta name="Description" content="A helper class for implementing events that use weak references. Consumers of your weak ref event must hold their own explicit reference to their handler delegate since the weak reference subscription won't keep the delegate alive." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Citrix.Cmp" /><meta name="file" content="dfd99657-c88e-98c1-0dc1-32615fcd07c5" /><meta name="guid" content="dfd99657-c88e-98c1-0dc1-32615fcd07c5" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="OH_outerDiv"><div class="OH_outerContent"><table class="TitleTable"><tr><td class="OH_tdTitleColumn">WeakRefEventHelper Class</td><td class="OH_tdRunningTitleColumn">Citrix Mobility Pack .NET SDK</td></tr></table><div id="mainSection"><div id="mainBody"><span class="introStyle"></span> <div class="summary"><p>
            A helper class for implementing events that use weak references.
            </p><p>
            Consumers of your weak ref event must hold their own explicit reference to their
            handler delegate since the weak reference subscription won't keep the delegate alive.
            If they don't hold their own reference the delegate will get garbage collected and end
            up never getting called.
            </p></div><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Inheritance Hierarchy</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">System<span id="LST4E1775DE_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Object</a><br />  <span class="selflink">Citrix.Cmp<span id="LST4E1775DE_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>WeakRefEventHelper</span><br /><p> </p>
    <strong>Namespace:</strong> 
   <a href="a096d640-bd1d-22e3-e658-15c131622f2c.htm">Citrix.Cmp</a><br />
    <strong>Assembly:</strong>
   Citrix.Cmp.WPF (in Citrix.Cmp.WPF.dll) Version: 2.0.0.0 (7.12.0.10009)<div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Syntax</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><div class="OH_CodeSnippetContainer"><div class="OH_CodeSnippetContainerTabs"><div class="OH_CodeSnippetContainerTabLeft" id="ID0EDCA_tabimgleft"> </div><div id="ID0EDCA_tab1" class="OH_CodeSnippetContainerTabFirst"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','cs','1','4');return false;">C#</a></div><div id="ID0EDCA_tab2" class="OH_CodeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','vb','2','4');return false;">VB</a></div><div id="ID0EDCA_tab3" class="OH_CodeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','cpp','3','4');return false;">C++</a></div><div id="ID0EDCA_tab4" class="OH_CodeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','fs','4','4');return false;">F#</a></div><div class="OH_CodeSnippetContainerTabRight" id="ID0EDCA_tabimgright"> </div></div><div class="OH_CodeSnippetContainerCodeCollection"><div class="OH_CodeSnippetToolBar"><div class="OH_CodeSnippetToolBarText"><a id="ID0EDCA_copyCode" href="#" class="OH_copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EDCA');return false;" title="Copy">Copy</a></div></div><div id="ID0EDCA_code_Div1" class="OH_CodeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="identifier">WeakRefEventHelper</span></pre></div><div id="ID0EDCA_code_Div2" class="OH_CodeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">Public</span> <span class="keyword">NotInheritable</span> <span class="keyword">Class</span> <span class="identifier">WeakRefEventHelper</span></pre></div><div id="ID0EDCA_code_Div3" class="OH_CodeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">ref class</span> <span class="identifier">WeakRefEventHelper</span> <span class="keyword">sealed</span></pre></div><div id="ID0EDCA_code_Div4" class="OH_CodeSnippetContainerCode" style="display: none"><pre xml:space="preserve">[&lt;<span class="identifier">SealedAttribute</span>&gt;]
<span class="keyword">type</span> <span class="identifier">WeakRefEventHelper</span> =  <span class="keyword">class</span> <span class="keyword">end</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EDCA");</script><p>The <span class="selflink">WeakRefEventHelper</span> type exposes the following members.</p><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Constructors</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><table class="members" id="constructorList"><tr><th class="ps_iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="2363a26f-6fea-c40f-c604-13148daee4c4.htm">WeakRefEventHelper</a></td><td><div class="summary">Initializes a new instance of the <span class="selflink">WeakRefEventHelper</span> class</div></td></tr></table><a href="#mainBody">Top</a><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Methods</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><table class="members" id="methodList"><tr><th class="ps_iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="a26d0687-132d-0448-17e0-90a84733d987.htm">AddWeakReferenceHandler(List<span id="LST4E1775DE_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_2?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_3?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><span id="LST4E1775DE_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_4?cpp=%");</script>, EventHandler)</a></td><td><div class="summary">
            Adds the supplied handler to the supplied list of handlers. The handler list maybe
            null and will get allocated as required.
            </div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="e40de6be-b02f-e599-50b1-e986cb0cd82c.htm">AddWeakReferenceHandler(List<span id="LST4E1775DE_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_5?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_6?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><span id="LST4E1775DE_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_7?cpp=%");</script>, EventHandler, Int32)</a></td><td><div class="summary">
            Adds the supplied handler to the supplied list of handlers. The handler list maybe
            null and will get allocated as required.
            </div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="219369b1-0ee2-fb4a-2cf1-ddbaf754977e.htm">AddWeakReferenceHandler<span id="LST4E1775DE_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_8?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>T<span id="LST4E1775DE_9"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_9?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>(List<span id="LST4E1775DE_10"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_10?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_11"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_11?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><span id="LST4E1775DE_12"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_12?cpp=%");</script>, EventHandler<span id="LST4E1775DE_13"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_13?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>T<span id="LST4E1775DE_14"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_14?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>)</a></td><td><div class="summary">
            Adds the supplied handler to the supplied list of handlers. The handler list maybe
            null and will get allocated as required.
            </div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="a73a2849-e650-7317-288b-db3a759b7367.htm">AddWeakReferenceHandler<span id="LST4E1775DE_15"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_15?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>T<span id="LST4E1775DE_16"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_16?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>(List<span id="LST4E1775DE_17"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_17?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_18"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_18?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script><span id="LST4E1775DE_19"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_19?cpp=%");</script>, EventHandler<span id="LST4E1775DE_20"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_20?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>T<span id="LST4E1775DE_21"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_21?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>, Int32)</a></td><td><div class="summary">
            Adds the supplied handler to the supplied list of handlers. The handler list maybe
            null and will get allocated as required.
            </div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="6f1ec6b8-631d-d632-220a-bcf5ccac805b.htm">CallWeakReferenceHandlers(List<span id="LST4E1775DE_22"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_22?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_23"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_23?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>, Object, EventArgs)</a></td><td><div class="summary">
            Calls the supplied set of weak reference handlers. We also perform maintenance of
            handler list. Any handler that points to a target that has been GC'd is removed from
            the list.
            </div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="837fbc31-3890-72ec-6c25-1ac10a4ff772.htm">CallWeakReferenceHandlers<span id="LST4E1775DE_24"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_24?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>T<span id="LST4E1775DE_25"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_25?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>(List<span id="LST4E1775DE_26"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_26?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_27"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_27?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>, Object, T)</a></td><td><div class="summary">
            Calls the supplied set of weak reference handlers. We also perform maintenance of
            handler list. Any handler that points to a target that has been GC'd is removed from
            the list.
            </div></td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/bsc2ak47" target="_blank">Equals</a></td><td><div class="summary">Determines whether the specified object is equal to the current object.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/zdee4b3y" target="_blank">GetHashCode</a></td><td><div class="summary">Serves as a hash function for a particular type. </div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/dfwy45w9" target="_blank">GetType</a></td><td><div class="summary">Gets the <a href="http://msdn2.microsoft.com/en-us/library/42892f65" target="_blank">Type</a> of the current instance.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="4b11913f-56f6-866e-d9b0-77f97441d999.htm">RemoveWeakReferenceHandler(List<span id="LST4E1775DE_28"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_28?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_29"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_29?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>, EventHandler)</a></td><td><div class="summary">
            Removes an event handler from the supplied handler list.
            </div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="f2f9ac4c-1b3c-b108-8562-242862877ccb.htm">RemoveWeakReferenceHandler<span id="LST4E1775DE_30"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_30?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>T<span id="LST4E1775DE_31"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_31?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>(List<span id="LST4E1775DE_32"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_32?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>WeakReference<span id="LST4E1775DE_33"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_33?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>, EventHandler<span id="LST4E1775DE_34"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_34?cs=&lt;|vb=(Of |cpp=&lt;|fs=&lt;'|nu=(");</script>T<span id="LST4E1775DE_35"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4E1775DE_35?cs=&gt;|vb=)|cpp=&gt;|fs=&gt;|nu=)");</script>)</a></td><td><div class="summary">
            Removes an event handler from the supplied handler list.
            </div></td></tr><tr data="public;inherited;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="http://msdn2.microsoft.com/en-us/library/7bxwbwt2" target="_blank">ToString</a></td><td><div class="summary">Returns a string that represents the current object.</div> (Inherited from <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">Object</a>.)</td></tr></table><a href="#mainBody">Top</a><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Examples</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><div class="OH_CodeSnippetContainer"><div class="OH_CodeSnippetContainerCodeCollection"><div class="OH_CodeSnippetToolBar"><div class="OH_CodeSnippetToolBarText"><a id="ID0EAAABA_copyCode" href="#" class="OH_copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAAABA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAAABA_code_Div1" class="OH_CodeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Don't do this. This works with regular .NET events, since the event keeps the</span>
<span class="highlight-comment">// delegate reference alive.</span>
<span class="highlight-keyword">private</span> <span class="highlight-keyword">void</span> SetupEvent()
{
    someObject.SomeEvent += <span class="highlight-keyword">new</span> EventHandler(SomeHandler);
}

<span class="highlight-comment">// Instead keep a member variable that references the delegate.</span>
<span class="highlight-keyword">private</span> EvenHandler _myHandler;

<span class="highlight-keyword">private</span> <span class="highlight-keyword">void</span> SetupEvent()
{
    <span class="highlight-comment">// This ensures the delegate doesn't get garbage collected.</span>
    _myHandler = <span class="highlight-keyword">new</span> EventHandler(SomeHandler);
    someObject.SomeEvent += _myHandler;
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAAABA");</script><div class="OH_CollapsibleAreaRegion" id="seeAlsoSection"><div class="OH_regiontitle">See Also</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="a096d640-bd1d-22e3-e658-15c131622f2c.htm">Citrix.Cmp Namespace</a></div></div></div></div></div><div id="OH_footer" class="OH_footer"> </div></body></html>